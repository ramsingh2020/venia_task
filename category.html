<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="fonts/fonts.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/responsive.css">
  <title>VENIA</title>
</head>
<body>
  <header>
    <div class="wrapper">
      <div class="hamberger-btn" aria-label="Toggle navigation"><img src="images/toggle.png" alt="Navigation toggle"></div>
      <a href="#" class="logo"><img src="images/white-logo.png" alt="VENIA Logo"></a>
      <nav>
        <ul>
          <li class="active"><a href="#" aria-current="page">Home</a></li>
          <li><a href="#">Women</a></li>
          <li><a href="#">Men</a></li>
          <li><a href="#">Smart gear</a></li>
          <li><a href="#">Accessories</a></li>
        </ul>
      </nav>
      <div class="cart-btn" aria-label="View cart"><img src="images/cart.png" alt=""></div>
      
    </div>
  </header>

  <main class="main-container">
    <section class="banner-sec" aria-labelledby="category-banner">
      <div class="category-name">
        <h1 id="category-banner">Men’s <br> Outerwear</h1>
      </div>
      <img src="images/cat_hero_banner.jpg" alt="category page banner" class="hero-image">
    </section>
    <div class="product-container">
      <div class="wrapper">
        <aside class="sidebar">
          <div class="breadcrumb" aria-label="Breadcrumb">
            <ul>
              <li><a href="#">Clothing</a></li>
              <li><a href="#">Women’s</a></li>
              <li>Outerwear</li>
            </ul>
          </div>
          <section class="cart-filters" aria-labelledby="filters-heading">
            
            <div class="search-product">
              <h3 class="heading" id="search-heading">Search</h3>
              <div class="searchbox">
                <input type="search" id="product-search" class="searchinput" placeholder="Search products..." aria-labelledby="search-heading"/>
                <button class="searchbtn" aria-label="Search products"><img src="images/search.png" alt="search icon"></button>
              </div>
            </div>
            <div class="filter-sec">
              <h3 class="heading" id="filter-heading">Filters</h3>
              <div class="filter-type">
                <h4>Categories</h4>
                <ul>
                  <li><label><input type="checkbox" value="jewelery" aria-label="Jewellery"> Jewellery</label></li>
                  <li><label><input type="checkbox" value="electronics" aria-label="Electronics"> Electronics</label></li>
                  <li><label><input type="checkbox" value="men's clothing" aria-label="Men’s Clothing"> Men’s Clothing</label></li>
                  <li><label><input type="checkbox" value="women's clothing" aria-label="Women’s Clothing"> Women’s Clothing</label></li>
                </ul>
              </div>
            </div>
          </section>
        </aside>
        <section class="product-section" aria-labelledby="product-section-heading">
         
          <div class="top-bar">
            <span class="result" aria-live="polite">0 Results</span>
            
            <select class="sortby" id="sortby" aria-label="Sort by">
              <option>Sort by Price</option>
              <option value="low-to-high">Lower to high</option>
              <option value="high-to-low">High to low</option>
            </select>
          </div>
          <div class="product-listing" id="product-listing" role="list">
            <!-- Product boxes will be inserted here dynamically -->
          </div>
          <div class="showmore-row">
            <button id="load-more" class="show-more-btn" aria-label="Load more products" style="display: none;">View More</button>
          </div>
          <nav class="pagination" aria-label="Pagination">
            <ul>
              <li class="active" aria-current="page"><a href="#">1</a></li>
              <li><a href="#">2</a></li>
              <li><a href="#">3</a></li>
              <li><a href="#">4</a></li>
              <li><a href="#"><img src="images/chevron-right.svg" alt="Next page"></a></li>
            </ul>
          </nav>
        </section>
      </div>
    </div>
  </main>

  <footer>
    <div class="top-footer">
      <div class="wrapper">
        <div class="footer-column">
          <h3>Account</h3>
          <ul class="links">
            <li><a href="#">Sign in</a></li>
            <li><a href="#">Register</a></li>
            <li><a href="#">Order status</a></li>
          </ul>
        </div>
        <div class="footer-column">
          <h3>About Us</h3>
          <ul class="links">
            <li><a href="#">Our story</a></li>
            <li><a href="#">Careers</a></li>
          </ul>
        </div>
        <div class="footer-column">
          <h3>Help</h3>
          <ul class="links">
            <li><a href="#">Contact us</a></li>
            <li><a href="#">Order status</a></li>
            <li><a href="#">Returns</a></li>
          </ul>
        </div>
        <div class="footer-column">
          <h3>Follow Us!</h3>
          <p class="description">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore.</p>
          <ul class="social-links">
            <li><a href="#" aria-label="Follow us on Instagram"><img src="images/instagram.svg" alt="instagram"></a></li>
            <li><a href="#" aria-label="Follow us on Facebook"><img src="images/facebook.svg" alt="facebook"></a></li>
            <li><a href="#" aria-label="Follow us on Twitter"><img src="images/twitter.svg" alt="twitter"></a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="bottom-footer">
      <div class="wrapper">
        <a href="#" class="logo"><img src="images/black-logo.png" alt="VENIA"></a>
        <p>© Company Name <br> Address Ave, City Name, State ZIP</p>
        <ul class="tnc">
          <li><a href="#">Terms of Use</a></li>
          <li><a href="#">Privacy Policy</a></li>
        </ul>
      </div>
    </div>
  </footer>

  <script type="text/javascript" src="js/jquery.min.js"></script>
  <script type="text/javascript" src="js/index.js"></script>
  <script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function() {
      let products = [];
      let currentIndex = 0;
      const productsPerPage = 10;
      let selectedCategories = [];
      let sortOrder = '';
      let searchQuery = '';

      function renderProducts(startIndex) {
        const productListing = document.getElementById("product-listing");
        productListing.innerHTML = '';
        let filteredProducts = products;

        // Apply search filter
        if (searchQuery) {
          filteredProducts = filteredProducts.filter(product =>
            product.title.toLowerCase().includes(searchQuery.toLowerCase())
          );
        }

        // Apply category filter
        if (selectedCategories.length > 0) {
          filteredProducts = filteredProducts.filter(product => selectedCategories.includes(product.category));
        }

        // Sort the products based on sortOrder
        if (sortOrder === 'low-to-high') {
          filteredProducts.sort((a, b) => a.price - b.price);
        } else if (sortOrder === 'high-to-low') {
          filteredProducts.sort((a, b) => b.price - a.price);
        }

        const endIndex = startIndex + productsPerPage;
        const itemsToShow = filteredProducts.slice(startIndex, endIndex);

        itemsToShow.forEach(product => {
          const productBox = document.createElement("div");
          productBox.className = "product-box";
          productBox.setAttribute("role", "listitem");
          productBox.innerHTML = `
            <div class="image-box">
              <img src="${product.image}" alt="${product.title}">
            </div>
            <h3 class="name"><a href="#">${product.title}</a></h3>
            <span class="price">$${product.price}</span>
            <button class="likedislike" aria-label="Save ${product.title}"></button>
            <div class="likedislike"><img src="images/save.png" alt="save"></div>
          `;
          productListing.appendChild(productBox);
        });

        currentIndex = startIndex + itemsToShow.length;
        updateResultsCount(filteredProducts.length);

        if (currentIndex >= filteredProducts.length) {
          document.getElementById("load-more").style.display = "none";
        } else {
          document.getElementById("load-more").style.display = "inline-block";
        }
      }

      function updateSelectedCategories() {
        const checkboxes = document.querySelectorAll('.filter-type input[type="checkbox"]');
        selectedCategories = Array.from(checkboxes)
          .filter(checkbox => checkbox.checked)
          .map(checkbox => checkbox.value);
        currentIndex = 0;
        renderProducts(currentIndex);
      }

      function updateSortOrder() {
        sortOrder = document.querySelector('.sortby').value;
        currentIndex = 0;
        renderProducts(currentIndex);
      }

      function updateSearchQuery() {
        searchQuery = document.getElementById('product-search').value;
        currentIndex = 0;
        renderProducts(currentIndex);
      }

      function updateResultsCount(count) {
        document.querySelector('.result').innerText = `${count} Results`;
      }

      function displayError(message) {
        const productListing = document.getElementById("product-listing");
        productListing.innerHTML = `<div class="error-message">${message}</div>`;
      }

      function fetchProducts() {
        fetch("https://fakestoreapi.com/products")
          .then(response => {
            if (!response.ok) {
              throw new Error(`Network response was not ok: ${response.statusText}`);
            }
            return response.json();
          })
          .then(data => {
            products = data;
            renderProducts(0);
          })
          .catch(error => {
            console.error("Error fetching data:", error);
            displayError("Failed to load products. Please try again later.");
          });
      }

      document.getElementById("load-more").addEventListener("click", function() {
        renderProducts(currentIndex);
      });

      document.querySelectorAll('.filter-type input[type="checkbox"]').forEach(checkbox => {
        checkbox.addEventListener('change', updateSelectedCategories);
      });

      document.querySelector('.sortby').addEventListener('change', updateSortOrder);

      document.getElementById('product-search').addEventListener('input', updateSearchQuery);

      fetchProducts();
    });
  </script>
</body>
</html>
